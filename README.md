# Uni Hub

- **Élő közös szerkesztés:**  A megoldás a Microsoft SignalR alapul. Létrehozunk egy Websocket kapcsolatot a szerver és a kliens között. Amikor valaki közösen akar szerkeszteni akkor létrehoz egy szobát, amihez a többiek csatlakoznak. Eltárolom a szobában szereplő személyeket és ha valaki módosít valamit a szerkesztőbe azt szerver oldalon eltárolom majd mindenki kap egy hívást a módosításról. Ha egy szoba kiürül akkor mentem el a módosításokat elkerülve a felesleges adatbázis hívásokat.
- **Élő chat** egy SignalR-en alapuló megoldás. Az adatbázisban letárolt régebbi üzeneteket megkapja a kliens majd ezeket kirendereli. Amit valaki ír egy új üzenetet arról minden csatlakozott kliens hívást kap. Ha minden kliens meg kapta a frissítéseket akkor eltárolom az üzenetet adatbázisban userId, üzenet és létrehozási dátum szerint (ami mindig a szerver oldali idő).
- **Regisztráció:** Megnézem hogy az adott usernévvel már létezik e már user. Ha nem akkor létrehozom az usert és a jelszavát MD5-Tel hesh elem, hogy ne lehessen visszafejthető. Sikeres létrehozás esetén generálok egy "guid" amit azonosító kulcsnak használok. Ezt a Guid a kliens megkapja. A guid szerver oldalon is eltárolom egy Directoryban hogy tudjam ellenőrizni hogy az a guid tényleg érvényes e és hogy tényleg az adott userhez tartozik majd. A  jeslzónak vannak feltételei minimum 8 karakter hosszúnak kell lenneie tartalmaznia kell egy kis és nagy betűt, egy számot és egy speciális karaktert. Ha ezek a feltételek nem teljseülnek a kliens nem enged regisztrálni.
- **Bejelentkezés:** A kapott adatok alapján megnézem hogy az adatbázisban létezik e ilyen személy ha igen akkor generálok egy "guid" ami mindig egyedi és azonosításra használom majd. A guid szerver oldalon is eltárolom egy Directoryban hogy tudjam ellenőrizni hogy az a guid tényleg érvényes e és hogy tényleg az adott userhez tartozik majd.
- **Kijelentkezés** Ha a user kijelentkezik akkor törlöm a Directornyból ahol az érvényes Guid-kat tárolom.
- **Listázás** Adatok lekérése az adatbázisból a kliens egy lekérdezést indít a szerver felé. Ekkor szerver lekérdezi aza adatokat az adatbázisból és ezt listába rendezi majd visszaadja a kliensnek. Ilyen lekérdezés történik mikor a eddigi chat üzeneteket kérjük le, a karokat kérdezzük le, a képzéseket, tantárgyakat, a jegyzeteket illetve a kérdéseket a tantárgyhoz vagy az e kettőhöz tartozó kommenteket.
- **Komment létrehozása:** Minden bejelent kezet user hozzá tud szólni egy jegyzethez vagy kérdéshez. Tudja utólag módosítani a saját kommentjét és törülni is tudja.
- **Jegyzet és kérdés** Minden bejelentkezett user létre tud hozni új jegyzetet vagy kérdést egy tantárgyhoz. A kérdést egy richtext editorban tudja szerkeszteni a user és html formátomban lesz letárolva az adatbázisba a tantárgy Id illetve az userId alapján. A jegyzet esetén a usernek joga van eldönteni, hogy nyitott (mások által is szabadon élőben szerkeszthető jegyzetet) vagy zárt (csak saját maga által szerkeszthető) jegyzetet hoz létre.
- **Vote** Minden bejelentkezett usernek joga van egy kommentet, jegyzetet, kérdést felfelé, illetve lefele szavazni. Ha egy szavazást utólag módosítunk pl negatív értékelésről pozitívra akkor a régi értékelés módosul az adatbázisban.
- **Reakció** Minden bejelentkezett usern
- **Sablon (Fork)** Minden bejelentkezett usernek tud egy rekaciót hozzáadni egy kommenthez, jegyzethez vagy kérdéshez
- **Kommentek/Jegyzetek/Kérdések utólagos módosítása:** Ha a jegyzet nem mindenki számára szerkesztehető akkor csak a létrehozó tudja utólagosan szerkeszteni úgy mint a kommentet és a kérdést.
- **Kommentek/Jegyzetek/Kérdések törlése:** Csak a létrehozónak van joga törölni a témát senki másnak. 
- **Moderátor jogkör:** Bármilyen kommentet/Kérdést és jegyzetet tud törölni.
- **Admin jogkör:** Mindent tud mint egy moderátor csak neki elérhető egy "Permission" gomb a navigációs bárban. Ezen belül moderátori és admin jogot tud adni bármelyik felhasználónak.
