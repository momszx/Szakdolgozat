# Uni Hub

## Backend

- **Élő közös szerkesztés:**  A megoldás a Microsoft SignalR alapul. Létrehozunk egy Websocket kapcsolatot a szerver és a kliens között. Amikor valaki közösen akar szerkeszteni akkor létrehoz egy szobát amihez a többiek csatlakoznak. Eltárolom a szobában szereplő személyeket és ha valaki módosit valamit a szerkesztőbe asz szerver oldalon eltárolom majd mindenki kap egy hívást a módositásról. Ha egy szoba kiürül akkor mentem el a módosításokat elkerülve a felesleges adatbázis hívásokat.
- **Élő chat** egy SignalR-en alapuló megoldás. Az adatbázisban letárolt régebbi üzeneteket megkapja a kliens majd ezeket kirendereli. Amit valaki ír egy új üzenetett arról minden csatlakozott kliens hívást kap. Ha minden kliens meg kapta a frissitéseket akkor eltárolom az üzenetett adatbázisban userId, üzenet és létrehozási dátum szerint (ami minndig a szerver oldali idő).
- **Regisztráció:** Megnézem hogy az adott usernévvel már létezik e már user. Ha nem akkor létrehozom az usert és a jelszavát MD5-el hesh elem, hogy ne lehessen visszafejthető. Sikeres létrehozás esetén generálok egy "guid" amit azonositó kulcsnak használok. Ezt a Guid a kliens megkapja. A guid szerver oldalon is eltárolom egy Directoryban hogy tudjam ellenőrizni hogy az a guid tényleg érvényes e és hogy tényleg az adott userhez tartozik majd.
- **Bejelentkezés:** A kapott adatok alapján megnézem hogy az adatbázisban létezik e ilyen személy ha igen akkor generálok egy "guid" ami mindig egyedi és azonositásra használom majd. A guid szerver oldalon is eltárolom egy Directoryban hogy tudjam ellenőrizni hogy az a guid tényleg érvényes e és hogy tényleg az adott userhez tartozik majd.
- **Kijelentkezés** Ha a user kijelentkezik akkor törlöm a Directornyból ahol az érvényes Guid-kat tárolom.
- **Listázás** Adatok lekérése az adatbázisból a kliens egy lekérdezést indít a szerver felé. Ekkor szerver lekérdezi aza adatokat az adatbázisból és ezt listába rendezi majd vissza daja a kliensenk. Ilyen lekérdezés töréni mikor a eddigi chat üzeneket kérjükle, a karokat kérdezük le, a képzéseket, tantárgyakat, a jegyzeteket illetve a kérdéseket a tantárgyhoz vagy az e kettőhöz tartozó kommnetekett.
- **Komment létrehozása:** Minden bejentkezet user hozzá tud szolni eg yjegyzethet vagy kérdéshez.Tudja utóla módositani a saját kommentjét és törülni is tudja.
- **Jegyzet és kérdés** Minden bejelentkezett user létre tud hozni új jegyzetet vagy kérdést egy tantárgyhoz. A kérdést egy richtext editorban tudja szerkeszteni a user és html formátomban lesz letárolva az adatbázisba a tantárgy Id illetve az user Id alapján. A jegyzet esetén a usernek joga van eldönteni hogy nyitott (mások által is szabadon előben szerkeszthető jegyzetet) vagy zárt (csak saját maga által szerkeszthető) jegyzetet hoz létre.
- **Vote** Minden bejelentkezett usernek joga van egy kommentet, jegyzetett, kérdést felfele illetve lefele szavazni. Ha egy szavazást utóla módositunk pl negatív értékelésről pozitivra akkor a régi értékelés módosul az adatbázisban.
- **Reakció** Minden bejelentkezett usern
- **Sablon (Fork)** Minden bejelentkezett usernek tud egy rekaciót hozzáadni egy kommenthez, jegyzethez vagy kérdéshez
